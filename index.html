<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Endless Adventure</title>
  <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #f0f0f0;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    .hidden {
      opacity: 0;
      z-index: -1;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    .hidden:not(.visible) {
      display: none;
    }

    .visible {
      opacity: 1;
      display: block;
    }

    button {
      padding: 10px 20px;
      background-color: #444;
      color: white;
      border: none;
      cursor: pointer;
      width: 200px;
    }

    .menu-button {
      display: block;
      margin: 10px auto;
    }

    #splash-dev {
      font-size: 2em;
      position: fixed;
      top: 30vh;
      width: 100%;
      transition: opacity 0.5s ease;
      z-index: 10;
    }

    #splash-dev img {
      display: block;
      width: 200px;
      height: 200px;
      min-width: 200px;
      min-height: 200px;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      background-color: #222;
      margin: 20px auto 0;
    }

    #splash-title {
      font-family: 'Uncial Antiqua', serif;
      font-size: 2em;
      font-weight: 700;
      color: #d9e4dd;
      position: fixed;
      top: 40vh;
      width: 100%;
      transition: opacity 0.5s ease;
      z-index: 10;
      white-space: normal;
      overflow-wrap: break-word;
      line-height: 1.2;
      letter-spacing: 2px;
      text-shadow: 0 0 5px rgba(217, 228, 221, 0.3), 0 0 10px rgba(217, 228, 221, 0.2);
      -webkit-text-stroke: 1px #333;
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 5px rgba(217, 228, 221, 0.3), 0 0 10px rgba(217, 228, 221, 0.2);
      }
      to {
        text-shadow: 0 0 8px rgba(217, 228, 221, 0.4), 0 0 12px rgba(217, 228, 221, 0.3);
      }
    }

    #main-menu {
      z-index: 5;
      transition: opacity 0.5s ease;
      padding-left: 10px;
      padding-right: 10px;
    }

    #main-menu h1 {
      white-space: normal;
      overflow-wrap: break-word;
    }

    #about-screen, #class-selection, #game-screen, #npc-dialog, #quests-screen, #inventory-screen {
      z-index: 5;
      transition: opacity 0.5s ease;
    }

    #travel-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.5s ease;
      z-index: 20;
      flex-direction: column;
    }

    #travel-screen.visible {
      opacity: 1;
      display: flex;
    }

    #travel-timer {
      font-size: 1.5em;
      color: #f0f0f0;
    }

    #travel-text {
      font-size: 0.9em;
      color: #ccc;
      margin-top: 10px;
      text-align: center;
      max-width: 80%;
    }

    #location-desc {
      padding: 0 5px;
      text-align: justify;
    }

    #location-buttons button {
      margin: 2px;
    }

    .class-option {
      cursor: pointer;
      margin: 10px auto;
      width: 80%;
      padding: 5px;
      border: 1px solid #666;
      background-color: #222;
      transition: background-color 0.3s ease, border-color 0.3s ease, max-height 0.3s ease;
      display: flex;
      flex-direction: column;
      min-height: 70px;
      box-sizing: border-box;
    }

    .class-option.selected {
      background-color: #333;
      border-color: #888;
    }

    .class-option:hover {
      background-color: #333;
    }

    .class-name-row {
      display: flex;
      align-items: center;
      height: 70px;
    }

    .class-option img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      margin: 5px 10px;
    }

    .class-name {
      font-size: 1em;
      font-weight: bold;
      flex: 1;
      text-align: left;
      overflow-wrap: break-word;
    }

    .class-details {
      max-height: 0;
      overflow: hidden;
      margin: 0 10px 10px 10px;
      padding: 0 10px;
      background-color: #333;
      border: 1px solid #777;
      font-size: 0.95em;
      color: #ccc;
      text-align: left;
      transition: max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .class-details:not(.hidden) {
      max-height: 300px;
      padding: 10px;
      opacity: 1;
    }

    .class-details p {
      margin: 5px 0;
    }

    .class-details strong {
      color: #f0f0f0;
    }

    #extra-content {
      width: 80%;
      margin: 0 auto;
    }

    .section-title {
      margin-top: 15px;
      margin-bottom: 10px;
      font-weight: bold;
      cursor: pointer;
      display: block;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }

    .section-title::after {
      content: "\25BC";
      display: inline-block;
      margin-left: 5px;
      transition: transform 0.3s ease;
    }

    .section-title.open::after {
      transform: rotate(180deg);
    }

    .section-content {
      margin-top: 5px;
      margin-bottom: 10px;
      font-size: 0.95em;
      color: #ccc;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }

    .section-content.hidden {
      display: none;
    }

    #menu-button {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 30;
      background-color: #444;
      border: none;
      color: white;
      font-size: 30px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #menu-button:hover {
      background-color: #555;
    }

    #sidebar-menu {
      position: fixed;
      top: 0;
      left: 0;
      width: 66.67%;
      height: 100%;
      background-color: #333333;
      transform: translateX(-100%);
      transition: transform 0.3s ease, opacity 0.3s ease;
      z-index: 30;
      display: flex;
      flex-direction: column;
      padding: 64px 20px 20px 20px;
      box-sizing: border-box;
    }

    #sidebar-menu.open {
      transform: translateX(0);
      opacity: 1;
    }

    #sidebar-menu.open ~ #menu-button {
      display: none;
    }

    #sidebar-menu button {
      background-color: #444;
      color: #f0f0f0;
      margin: 10px 0;
      width: 100%;
      text-align: left;
      transition: background-color 0.3s ease;
      font-family: Arial, 'Segoe UI Emoji', sans-serif;
    }

    #sidebar-menu button:hover {
      background-color: #555;
    }

    #sidebar-close {
      position: fixed;
      top: 10px;
      left: 10px;
      width: 40px !important;
      height: 40px !important;
      min-width: 40px;
      min-height: 40px;
      background-color: #444;
      color: #ffffff !important;
      font-size: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-sizing: border-box;
      padding: 0;
      border: none;
      overflow: hidden;
      appearance: none;
      -webkit-appearance: none;
      z-index: 30;
    }

    #sidebar-close:hover {
      background-color: #555;
    }

    #npc-dialog {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #111;
      z-index: 25;
      transition: opacity 0.5s ease;
      box-sizing: border-box;
      padding: 20px;
      padding-bottom: 80px;
      display: grid;
      grid-template-columns: 33.33% 66.67%;
      grid-template-rows: auto auto 1fr auto;
      gap: 10px;
    }

    #npc-dialog.visible {
      opacity: 1;
      display: grid;
    }

    #npc-image {
      grid-column: 1 / 2;
      grid-row: 1 / 2;
      width: 150px;
      height: 150px;
      object-fit: cover;
      margin: 15px;
    }

    #npc-name {
      grid-column: 2 / 3;
      grid-row: 1 / 2;
      color: #f0f0f0;
      font-size: 1.8em;
      margin: 15px 15px 5px 15px;
      text-align: left;
    }

    #npc-desc {
      grid-column: 2 / 3;
      grid-row: 1 / 2;
      color: #ccc;
      font-size: 1em;
      margin: 50px 15px 15px 15px;
      text-align: left;
      max-width: 600px;
    }

    #npc-text {
      grid-column: 2 / 3;
      grid-row: 2 / 3;
      color: #f0f0f0;
      font-size: 1.1em;
      margin: 10px 15px;
      text-align: left;
      max-height: calc(100vh - 200px);
      overflow-y: auto;
    }

    #quest-limit-msg {
      position: fixed;
      bottom: 105px;
      left: 50%;
      transform: translateX(-50%);
      color: #f88;
      font-size: 0.9em;
      margin: 0;
      width: 200px;
      text-align: center;
    }

    #npc-quest {
      position: fixed;
      bottom: 65px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #444;
      color: white;
      width: 200px;
      padding: 10px 20px;
      cursor: pointer;
      transition: background-color 0.3s ease, opacity 0.3s ease;
    }

    #npc-quest:hover:not(:disabled) {
      background-color: #555;
    }

    #npc-quest:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background-color: #333;
    }

    #npc-exit {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #444;
      color: white;
      width: 200px;
      padding: 10px 20px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    #npc-exit:hover {
      background-color: #555;
    }

    #quests-screen {
      padding: 20px;
      width: 80%;
      margin: 0 auto;
    }

    #quests-screen h2 {
      margin-bottom: 20px;
    }

    .quest-item {
      cursor: pointer;
      margin: 10px auto;
      padding: 10px;
      border: 1px solid #666;
      background-color: #222;
      transition: background-color 0.3s ease, border-color 0.3s ease;
      width: 80%;
    }

    .quest-item:hover {
      background-color: #333;
      border-color: #888;
    }

    .quest-details {
      margin-top: 5px;
      padding: 10px;
      background-color: #333;
      border: 1px solid #777;
      font-size: 0.95em;
      color: #ccc;
      text-align: left;
    }

    .quest-details.hidden {
      display: none;
    }

    #inventory-screen {
      padding: 20px;
    }

    #inventory-tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }

    .tab-button {
      background-color: #333;
      border: 1px solid #666;
      color: #f0f0f0;
      font-size: 1.5em;
      padding: 10px 20px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin: 0 5px;
    }

    .tab-button.active {
      background-color: #555;
      border-color: #888;
    }

    .tab-button:hover {
      background-color: #444;
    }

    #inventory-list {
      display: flex;
      flex-direction: column;
      width: 90%;
      max-width: 600px;
      margin: 0 auto;
    }

    .inventory-item {
      display: flex;
      align-items: center;
      height: 70px;
      background-color: #222;
      border: 1px solid #666;
      margin-bottom: 5px;
      box-sizing: border-box;
    }

    .inventory-item.empty {
      background-color: #333;
      border: 1px solid #555;
    }

    .inventory-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      margin: 5px 10px;
    }

    .inventory-item .item-text {
      flex: 1;
      text-align: left;
      padding-right: 10px;
    }

    .inventory-item .item-name {
      font-size: 1em;
      font-weight: bold;
      overflow-wrap: break-word;
    }

    .inventory-item .item-desc {
      font-size: 0.8em;
      color: #ccc;
      overflow-wrap: break-word;
      line-height: 1.2;
    }

    #inventory-empty {
      font-size: 1em;
      color: #ccc;
      margin: 20px auto;
    }

    @media (max-width: 600px) {
      #splash-title {
        font-size: 1.5em;
        letter-spacing: 1px;
        -webkit-text-stroke: 0.5px #333;
        text-shadow: 0 0 4px rgba(217, 228, 221, 0.3), 0 0 8px rgba(217, 228, 221, 0.2);
      }

      #npc-dialog {
        grid-template-columns: 100%;
        grid-template-rows: auto auto auto 1fr;
        padding: 10px;
        padding-bottom: 80px;
      }

      #npc-image {
        grid-column: 1 / 2;
        grid-row: 1 / 2;
        width: 100px;
        height: 100px;
        margin: 10px auto;
      }

      #npc-name {
        grid-column: 1 / 2;
        grid-row: 2 / 3;
        font-size: 1.5em;
        margin: 10px;
        text-align: center;
      }

      #npc-desc {
        grid-column: 1 / 2;
        grid-row: 3 / 4;
        font-size: 0.9em;
        margin: 0 10px 10px 10px;
        text-align: center;
      }

      #npc-text {
        grid-column: 1 / 2;
        grid-row: 4 / 5;
        font-size: 1em;
        margin: 10px;
        max-height: calc(100vh - 250px);
        overflow-y: auto;
      }

      #quest-limit-msg {
        bottom: 95px;
        width: 150px;
        font-size: 0.8em;
      }

      #npc-quest {
        bottom: 55px;
        width: 150px;
      }

      #npc-exit {
        bottom: 10px;
        width: 150px;
      }

      #quests-screen {
        width: 90%;
        padding: 10px;
      }

      .quest-item {
        width: 90%;
      }

      #inventory-tabs {
        margin-bottom: 10px;
      }

      .tab-button {
        font-size: 1.2em;
        padding: 8px 15px;
        margin: 0 3px;
      }

      #inventory-list {
        width: 95%;
        max-width: 400px;
      }

      .inventory-item {
        height: 50px;
        margin-bottom: 3px;
      }

      .inventory-item img {
        width: 40px;
        height: 40px;
        margin: 5px 8px;
      }

      .inventory-item .item-name {
        font-size: 0.9em;
      }

      .inventory-item .item-desc {
        font-size: 0.7em;
      }

      .class-option {
        min-height: 50px;
        padding: 3px;
      }

      .class-name-row {
        height: 50px;
      }

      .class-option img {
        width: 40px;
        height: 40px;
        margin: 5px 8px;
      }

      .class-name {
        font-size: 0.9em;
      }

      .class-details {
        font-size: 0.85em;
        padding: 0 8px;
        margin: 0 8px 8px 8px;
      }

      .class-details:not(.hidden) {
        padding: 8px;
      }
    }
  </style>
</head>
<body>
  <div id="inventory-screen" class="hidden">
    <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
    <div id="inventory-tabs">
      <button class="tab-button" data-tab="weapons">‚öîÔ∏è</button>
      <button class="tab-button" data-tab="armor">üõ°Ô∏è</button>
      <button class="tab-button" data-tab="potions">üß™</button>
      <button class="tab-button" data-tab="keyItems">üîë</button>
    </div>
    <div id="inventory-list"></div>
    <p id="inventory-empty" class="hidden">–†–∞–∑–¥–µ–ª –ø—É—Å—Ç</p>
    <button onclick="backToGame()">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="menu-button" onclick="toggleMenu()"><span>‚ò∞</span></div>
  <div id="sidebar-menu" class="hidden">
    <button id="sidebar-close" onclick="toggleMenu()">‚úñ</button>
    <button id="sidebar-about-character" onclick="showAboutCharacter()">‚ÑπÔ∏è –û–± –∏–≥—Ä–æ–∫–µ</button>
    <button onclick="showInventory()">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
    <button onclick="showSkills()">‚öîÔ∏è –£–º–µ–Ω–∏—è</button>
    <button onclick="showQuests()">üìú –ö–≤–µ—Å—Ç—ã</button>
  </div>
  <div id="splash-dev">
    Murmyak Games
    <img src="logo.png" alt="Murmyak Games Logo">
  </div>
  <div id="splash-title" class="hidden">Endless Adventure</div>

  <div id="main-menu" class="hidden">
    <h1>Endless Adventure</h1>
    <div class="menu-button">
      <button onclick="newGame()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    </div>
    <div class="menu-button">
      <button onclick="continueGame()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
    </div>
    <div class="menu-button">
      <button onclick="showAbout()">–û–± –∏–≥—Ä–µ</button>
    </div>
  </div>

  <div id="about-screen" class="hidden">
    <h2>–û–± –∏–≥—Ä–µ</h2>
    <p>by merzlyakov</p>
    <button onclick="backToMenu()">–ù–∞–∑–∞–¥</button>
  </div>

  <div id="class-selection" class="hidden">
    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</h2>
    <div class="class-option" data-class="archer" onclick="toggleClassInfo(this)">
      <div class="class-name-row">
        <img src="archer.png" alt="–°–ª–µ–¥–æ–ø—ã—Ç">
        <div class="class-name">–°–ª–µ–¥–æ–ø—ã—Ç</div>
      </div>
      <div class="class-details hidden">
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ò—Å–∫—Ä—ã –≥–ª–∞–∑ —Å–ª–µ–¥—è—Ç –∑–∞ –∫–∞–∂–¥—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º –≤ —á–∞—â–µ, –∞ —Å—Ç—Ä–µ–ª—ã –±—å—é—Ç –±–µ–∑ –ø—Ä–æ–º–∞—Ö–∞.</p>
        <p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:</strong> –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ 10% –±—ã—Å—Ç—Ä–µ–µ.</p>
        <p><strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ:</strong> –õ—É–∫, –ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è, –ö–æ–ª—å—á—É–∂–Ω—ã–π –∫–∞–ø—é—à–æ–Ω, –ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è, –ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏.</p>
      </div>
    </div>
    <div class="class-option" data-class="warrior" onclick="toggleClassInfo(this)">
      <div class="class-name-row">
        <img src="warrior.png" alt="–í–æ–∏–Ω">
        <div class="class-name">–í–æ–∏–Ω</div>
      </div>
      <div class="class-details hidden">
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –°–∏–ª—å–Ω—ã–π –∏ –≤—ã–Ω–æ—Å–ª–∏–≤—ã–π –±–æ–µ—Ü, –≥–æ—Ç–æ–≤—ã–π —Å—Ç–æ—è—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.</p>
        <p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:</strong> –ü–æ–ª—É—á–∞–µ—Ç –Ω–∞ 15% –º–µ–Ω—å—à–µ —É—Ä–æ–Ω–∞.</p>
        <p><strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ:</strong> –ú–µ—á, –©–∏—Ç, –°—Ç–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è, –ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è, –ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏.</p>
      </div>
    </div>
    <div class="class-option" data-class="rogue" onclick="toggleClassInfo(this)">
      <div class="class-name-row">
        <img src="rogue.png" alt="–†–∞–∑–±–æ–π–Ω–∏–∫">
        <div class="class-name">–†–∞–∑–±–æ–π–Ω–∏–∫</div>
      </div>
      <div class="class-details hidden">
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –¢–µ–Ω—å, —á—Ç–æ –∫—Ä–∞–¥—ë—Ç—Å—è –≤ –Ω–æ—á–∏, —Å –∫–ª–∏–Ω–∫–æ–º, –≥–æ—Ç–æ–≤—ã–º –∫ —É–¥–∞—Ä—É.</p>
        <p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:</strong> –ù–∞–Ω–æ—Å–∏—Ç –Ω–∞ 20% –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞ –ø—Ä–∏ —Å–∫—Ä—ã—Ç–Ω–æ–π –∞—Ç–∞–∫–µ.</p>
        <p><strong>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ:</strong> –ö–∏–Ω–∂–∞–ª—ã, –ü–ª–∞—â —Ç–µ–Ω–µ–π, –ú–∞—Å–∫–∞, –ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è, –ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏.</p>
      </div>
    </div>
    <button onclick="selectClass()">–í—ã–±—Ä–∞—Ç—å</button>
  </div>

  <div id="game-screen" class="hidden">
    <h2 id="location-name"></h2>
    <p id="location-desc"></p>
    <div id="location-buttons"></div>
    <div id="extra-content"></div>
  </div>

  <div id="travel-screen" class="hidden">
    <div id="travel-timer">–í—ã –∏–¥—ë—Ç–µ...</div>
    <p id="travel-text"></p>
  </div>

  <div id="npc-dialog" class="hidden">
    <img id="npc-image" src="" alt="NPC">
    <h2 id="npc-name"></h2>
    <p id="npc-desc"></p>
    <p id="npc-text"></p>
    <p id="quest-limit-msg" class="hidden">
      –£ –≤–∞—Å –Ω–µ –º–æ–∂–µ—Ç –±–æ–ª—å—à–µ —á–µ—Ç—ã—Ä—ë—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤. –°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —É–∂–µ –Ω–∞—á–∞—Ç—ã–µ –∫–≤–µ—Å—Ç—ã.
    </p>
    <button id="npc-quest" onclick="takeQuest()">–í–∑—è—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
    <button id="npc-exit" onclick="closeNpcDialog()">–í—ã–π—Ç–∏</button>
  </div>

  <div id="quests-screen" class="hidden">
    <h2>–ö–≤–µ—Å—Ç—ã</h2>
    <div id="quests-list"></div>
    <button onclick="backToGame()">–ù–∞–∑–∞–¥</button>
  </div>

  <script>
    // –î–∞–Ω–Ω—ã–µ NPC
    const npcData = {
      "–°—Ç–∞—Ä–æ—Å—Ç–∞ –õ–µ–º": {
        text: "–ù–∞—à –≥–æ–Ω–µ—Ü —É—à—ë–ª —Å –ø–∏—Å—å–º–æ–º –∫ —Å–æ—Å–µ–¥–Ω–µ–º—É –ø–æ—Å–µ–ª–µ–Ω–∏—é, –Ω–æ —Ç–∞–∫ –∏ –Ω–µ –≤–µ—Ä–Ω—É–ª—Å—è. –û–Ω –Ω–µ –∏–∑ —Ç–µ—Ö, –∫—Ç–æ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—ã—â–∏ –µ–≥–æ. –Ø –±–æ—é—Å—å —Ö—É–¥—à–µ–≥–æ.",
        desc: "–ú—É–¥—Ä—ã–π –≥–ª–∞–≤–∞ –¥–µ—Ä–µ–≤–Ω–∏, —á—å–∏ –≥–ª–∞–∑–∞ —Ö—Ä–∞–Ω—è—Ç —Ç—Ä–µ–≤–æ–≥—É –∑–∞ —Å–≤–æ–π –Ω–∞—Ä–æ–¥.",
        image: "oldman.jpg"
      },
      "–ö—É–∑–Ω–µ—Ü –ë—Ä–∞–Ω": {
        text: "–ë–µ–∑ —Ö–æ—Ä–æ—à–µ–≥–æ —É–≥–ª—è —è –Ω–µ —Å–º–æ–≥—É –∫–æ–≤–∞—Ç—å –Ω–∏ –º–µ—á–∞, –Ω–∏ –ø–æ–¥–∫–æ–≤—É. –®–∞—Ö—Ç–∞ –∫ —é–≥—É –æ–ø—É—Å—Ç–µ–ª–∞, –Ω–æ —É–≥–æ–ª—å —Ç–∞–º –≤—Å—ë –µ—â—ë –µ—Å—Ç—å. –î–æ–±—É–¥—å –Ω–µ–º–Ω–æ–≥–æ ‚Äî –∏ —è –æ—Ç–±–ª–∞–≥–æ–¥–∞—Ä—é.",
        desc: "–ì—Ä—É–±—ã–π, –Ω–æ –º–∞—Å—Ç–µ—Ä–æ–≤–∏—Ç—ã–π –∫—É–∑–Ω–µ—Ü, —á—å–∏ —Ä—É–∫–∏ —Å–æ–∑–¥–∞—é—Ç –æ—Ä—É–∂–∏–µ –ª–µ–≥–µ–Ω–¥.",
        image: "blacksmith.jpg"
      },
      "–û—Ö–æ—Ç–Ω–∏—Ü–∞ –≠–ª–∏—Ä–∞": {
        text: "–Ø –Ω–∞—à–ª–∞ —Å–ª–µ–¥—ã ‚Äî –∫—Ä—É–ø–Ω—ã–µ, —Å –∫—Ä–æ–≤—å—é. –≠—Ç–æ –Ω–µ –≤–æ–ª–∫. –ß—Ç–æ-—Ç–æ —É–±–∏–≤–∞–µ—Ç –∑–≤–µ—Ä–µ–π –∏ –ø—É–≥–∞–µ—Ç –ª–µ—Å. –Ø –∏–¥—É –Ω–∞ –æ—Ö–æ—Ç—É. –ù–µ —Ö–æ—á–µ—à—å –ø–æ–π—Ç–∏ —Å–æ –º–Ω–æ–π? –í–¥–≤–æ—ë–º —É –Ω–∞—Å –±–æ–ª—å—à–µ —à–∞–Ω—Å–æ–≤.",
        desc: "–õ–æ–≤–∫–∞—è —Å–ª–µ–¥–æ–ø—ã—Ç–∫–∞, —á—å—ë —Å–µ—Ä–¥—Ü–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥–∏–∫–æ–º—É –ª–µ—Å—É.",
        image: "hunter.jpg"
      },
      "–†—ã–±–∞–∫ –ù–æ—Ä": {
        text: "–Ø –≤–∏–¥–µ–ª –µ–≥–æ ‚Äî –æ–≥—Ä–æ–º–Ω—ã–π, —Å —É—Å–∞–º–∏, –∫–∞–∫ —É —Å—Ç–∞—Ä–æ–≥–æ –º—É–¥—Ä–µ—Ü–∞. –°–æ–º–∞–≤—Ä —Å–Ω–æ–≤–∞ –≤ –ø—Ä—É–¥—É. –ù–∏–∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –≤—ã—Ç–∞—â–∏—Ç—å. –ê —Ç—ã –ø–æ–ø—Ä–æ–±—É–π... –≤–¥—Ä—É–≥ –ø–æ–≤–µ–∑—ë—Ç?",
        desc: "–°–µ–¥–æ–π —Ä—ã–±–∞–∫, –∑–Ω–∞—é—â–∏–π —Ç–∞–π–Ω—ã —Ä–µ–∫–∏ –∏ –µ—ë –¥—É—Ö–æ–≤.",
        image: "fisherman.jpg"
      },
      "–ú—É–¥—Ä–∞—è –∂–∞–±–∞": {
        text: "–ü–µ–π –±–æ–ª—å—à–µ –≤–æ–¥—ã –∏ –≤—ã—Å—ã–ø–∞–π—Å—è.",
        desc: "–û–Ω–∞ –∑–Ω–∞–µ—Ç –±–æ–ª—å—à–µ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è, –∏ –≤—Å–µ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—Ç –ø–æ –¥–µ–ª—É.",
        image: "toad.jpg"
      },
      "–°—Ç—Ä–∞–∂ –†–æ–ª–∞–Ω": {
        text: "–Ø –Ω–∞ –ø–æ—Å—Ç—É –∫–∞–∂–¥—É—é –Ω–æ—á—å, –∏ –≤—Å—ë —á–∞—â–µ —Å–ª—ã—à—É —à–∞–≥–∏ –Ω–∞–≤–µ—Ä—Ö—É, –∫–æ–≥–¥–∞ –±–∞—à–Ω—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—É—Å—Ç–∞... –ü—Ä–æ–≤–µ—Ä—å —ç—Ç–æ –∑–∞ –º–µ–Ω—è. –Ø –Ω–µ –º–æ–≥—É —É–π—Ç–∏ —Å –ø–æ—Å—Ç–∞.",
        desc: "–°—É—Ä–æ–≤—ã–π –≤–æ–∏–Ω, –≤–µ—Ä–Ω—ã–π —Å–≤–æ–µ–º—É –¥–æ–ª–≥—É –æ—Ö—Ä–∞–Ω—è—Ç—å –±–∞—à–Ω—é.",
        image: "guard.jpg"
      },
      "–°—Ç–∞—Ä–µ—Ü –í–µ–π–Ω": {
        text: "–ó–∞–∫–ª—è—Ç–∏–µ —Ä–∞—Å—Å—ã–ø–∞–µ—Ç—Å—è, –∫–∞–∫ –ø–µ—Å–æ–∫ —Å–∫–≤–æ–∑—å –ø–∞–ª—å—Ü—ã... –ú–Ω–µ –Ω—É–∂–Ω–∞ –æ–¥–Ω–∞ —Å—Ç–∞—Ä–∞—è –∫–Ω–∏–≥–∞. –ï—ë —Ö—Ä–∞–Ω—è—Ç —Ä—É–∏–Ω—ã –Ω–∞ –≤–æ—Å—Ç–æ–∫–µ. –û–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ, –Ω–æ —Ç—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è. –Ø —á—É–≤—Å—Ç–≤—É—é —ç—Ç–æ.",
        desc: "–•—Ä–∞–Ω–∏—Ç–µ–ª—å –æ–∑—ë—Ä–Ω—ã—Ö –ª–µ–≥–µ–Ω–¥, —á–µ–π –≤–∑–æ—Ä —É—Å—Ç—Ä–µ–º–ª—ë–Ω –≤ –≥–ª—É–±–∏–Ω—ã.",
        image: "elder.jpg"
      },
      "–°–∫–∏—Ç–∞–ª–µ—Ü –ö–∞–π—Ä": {
        text: "–õ—é–¥–∏ –∏—Å—á–µ–∑–∞—é—Ç –Ω–∞ —Å—Ç–∞—Ä–æ–º —Ç—Ä–∞–∫—Ç–µ. –ë–µ–∑ —à—É–º–∞, –±–µ–∑ —Å–ª–µ–¥–∞. –Ø —Å–ª—ã—à—É —à–æ—Ä–æ—Ö–∏ –≤ –Ω–æ—á–∏, –Ω–µ –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ –∑–≤–µ—Ä–µ–π. –ü—Ä–æ–π–¥–∏ –ø–æ —Ç–æ–π –¥–æ—Ä–æ–≥–µ... –Ω–æ –±—É–¥—å –≥–æ—Ç–æ–≤ –∫ —Ç–µ–Ω—è–º.",
        desc: "–ë—Ä–æ–¥—è–≥–∞ —Å –æ—Å—Ç—Ä—ã–º —É–º–æ–º, –∑–Ω–∞—é—â–∏–π –∫–∞–∂–¥—ã–π —É–≥–æ–ª–æ–∫ –∫–∞–Ω—å–æ–Ω–∞.",
        image: "wanderer.jpg"
      },
      "–ö–æ–º–µ–Ω–¥–∞–Ω—Ç –†–µ–π–Ω": {
        text: "–ö—Ç–æ-—Ç–æ –∏–∑ –º–æ–∏—Ö —Å—Ç—Ä–∞–∂–µ–π —á—Ç–æ-—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç. –Ø –≤–∏–∂—É –≤–∑–≥–ª—è–¥—ã, —Å–ª—ã—à—É —à—ë–ø–æ—Ç—ã. –ú–Ω–µ –Ω—É–∂–µ–Ω —Ç–æ—Ç, –∫–æ–º—É —è –º–æ–≥—É –¥–æ–≤–µ—Ä—è—Ç—å. –ü–æ–º–æ–≥–∏ –º–Ω–µ –≤—ã—è—Å–Ω–∏—Ç—å –ø—Ä–∞–≤–¥—É ‚Äî –ø–æ–∫–∞ –Ω–µ –ø–æ–∑–¥–Ω–æ.",
        desc: "–ë—ã–≤—à–∏–π –ª–∏–¥–µ—Ä –∫—Ä–µ–ø–æ—Å—Ç–∏, –∂–∞–∂–¥—É—â–∏–π –≤–µ—Ä–Ω—É—Ç—å –µ—ë –±—ã–ª—É—é —Å–ª–∞–≤—É.",
        image: "commander.jpg"
      }
    };

    // –î–∞–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç–æ–≤ (–±–µ–∑ –ú—É–¥—Ä–æ–π –∂–∞–±—ã)
    const questData = {
      "–°—Ç–∞—Ä–æ—Å—Ç–∞ –õ–µ–º": {
        title: "–ü—Ä–æ–ø–∞–≤—à–∏–π –≥–æ–Ω–µ—Ü",
        desc: "–ù–∞–π–¥–∏ –≤–µ—Å—Ç–Ω–∏–∫–∞ –≤ –ª–µ—Å—É",
        condition: "–ù–∞–π—Ç–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –≥–æ–Ω—Ü–∞ –∂–∏–≤—ã–º",
        reward: "20 –º–æ–Ω–µ—Ç, +–¥–æ–≤–µ—Ä–∏–µ –¥–µ—Ä–µ–≤–Ω–∏"
      },
      "–ö—É–∑–Ω–µ—Ü –ë—Ä–∞–Ω": {
        title: "–£–≥–ª–∏ –¥–ª—è –∫—É–∑–Ω–∏",
        desc: "–î–æ–±—ã—Ç—å —É–≥–æ–ª—å –≤ —à–∞—Ö—Ç–µ",
        condition: "–ü—Ä–∏–Ω–µ—Å—Ç–∏ 5 –µ–¥–∏–Ω–∏—Ü —É–≥–ª—è",
        reward: "–ü—Ä–æ—á–Ω—ã–π –º–µ—á –∏–ª–∏ –±—Ä–æ–Ω—è"
      },
      "–û—Ö–æ—Ç–Ω–∏—Ü–∞ –≠–ª–∏—Ä–∞": {
        title: "–¢—Ä–æ–ø–∞–º–∏ –∑–≤–µ—Ä—è",
        desc: "–£–±–µ–π –≤—É—Ä–¥–∞–ª–∞–∫–∞ –≤ –ª–µ—Å—É",
        condition: "–ü–æ–±–µ–¥–∏—Ç—å –≤—É—Ä–¥–∞–ª–∞–∫–∞ –≤ –ª–µ—Å—É",
        reward: "–û—Ö–æ—Ç–Ω–∏—á–∏–π –ø–ª–∞—â (+–ª–æ–≤–∫–æ—Å—Ç—å)"
      },
      "–†—ã–±–∞–∫ –ù–æ—Ä": {
        title: "–ë–æ–ª—å—à–∞—è —Ä—ã–±–∞",
        desc: "–ü–æ–π–º–∞–π —Ä–µ–¥–∫–æ–≥–æ —Å–æ–º–∞–≤—Ä–∞",
        condition: "–ü–æ–π–º–∞—Ç—å –∏ –ø—Ä–∏–Ω–µ—Å—Ç–∏ —Å–æ–º–∞–≤—Ä–∞",
        reward: "–°–µ—Ä–µ–±—Ä—è–Ω—ã–π –∫—Ä—é—á–æ–∫ (+—É–¥–∞—á–∞ –≤ —Ä—ã–±–∞–ª–∫–µ)"
      },
      "–°—Ç—Ä–∞–∂ –†–æ–ª–∞–Ω": {
        title: "–¢–∏—Ö–∞—è –±–∞—à–Ω—è",
        desc: "–ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏ –Ω–æ—á—å—é",
        condition: "–í—ã—Å–ª–µ–¥–∏—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è",
        reward: "–î–æ—Å–ø–µ—Ö —Å—Ç—Ä–∞–∂–∞ (+–∑–∞—â–∏—Ç–∞)"
      },
      "–°—Ç–∞—Ä–µ—Ü –í–µ–π–Ω": {
        title: "–ü—ã–ª—å –≤—Ä–µ–º—ë–Ω",
        desc: "–ù–∞–π–¥–∏ –¥—Ä–µ–≤–Ω—é—é –∫–Ω–∏–≥—É –≤ —Ä—É–∏–Ω–∞—Ö",
        condition: "–ü—Ä–∏–Ω–µ—Å—Ç–∏ –∫–Ω–∏–≥—É –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ö—Ä–∞–º–∞",
        reward: "–°–≤–∏—Ç–æ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è –∏–ª–∏ –º–∞–Ω–∞-–∫–∞–º–µ–Ω—å"
      },
      "–°–∫–∏—Ç–∞–ª–µ—Ü –ö–∞–π—Ä": {
        title: "–°–ª–µ–¥—ã —Ç–µ–Ω–µ–π",
        desc: "–†–∞—Å—Å–ª–µ–¥—É–π –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –Ω–∞ –¥–æ—Ä–æ–≥–µ",
        condition: "–ü–æ–±–µ–¥–∏—Ç—å —Ç–µ–Ω–µ–≤–æ–≥–æ –≤—Ä–∞–≥–∞ –Ω–∞ —Ç—Ä–∞–∫—Ç–µ",
        reward: "–ü–ª–∞—â —Ç–µ–Ω–µ–π (+—É–∫–ª–æ–Ω–µ–Ω–∏–µ)"
      },
      "–ö–æ–º–µ–Ω–¥–∞–Ω—Ç –†–µ–π–Ω": {
        title: "–ó–∞–ø–∞—Ö –º—è—Ç–µ–∂–∞",
        desc: "–†–∞—Å–∫—Ä–æ–π –∑–∞–≥–æ–≤–æ—Ä –≤ –∫—Ä–µ–ø–æ—Å—Ç–∏",
        condition: "–í—ã—è–≤–∏—Ç—å –∏ —Ä–∞–∑–æ–±–ª–∞—á–∏—Ç—å –∑–∞–≥–æ–≤–æ—Ä—â–∏–∫–æ–≤",
        reward: "–û—Ä–¥–µ–Ω –∫–æ–º–µ–Ω–¥–∞–Ω—Ç–∞ (+–≤–ª–∏—è–Ω–∏–µ)"
      }
    };

    // –¢–µ–∫—Å—Ç—ã –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞
    const travelTexts = {
      "–î–µ—Ä–µ–≤–Ω—è": "–¢–µ–ø–ª–æ –æ—á–∞–≥–æ–≤ –∑–æ–≤—ë—Ç –ø—É—Ç–Ω–∏–∫–∞ –¥–æ–º–æ–π...",
      "–õ–µ—Å": "–¢–µ–Ω–∏ —à–µ–ø—á—É—Ç –≤ —á–∞—â–µ, —Å–∫—Ä—ã–≤–∞—è –ø—É—Ç—å...",
      "–†–µ–∫–∞": "–Ø –≤ —Å–≤–æ–µ–º –ø–æ–∑–Ω–∞–Ω–∏–∏ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø—Ä–µ–∏—Å–ø–æ–ª–Ω–∏–ª—Å—è...",
      "–ì–æ—Ä—ã": "–í–µ—Ç–µ—Ä –Ω–µ—Å—ë—Ç —ç—Ö–æ –¥—Ä–µ–≤–Ω–∏—Ö –±–∏—Ç–≤...",
      "–ü–æ–ª—è–Ω–∞": "–ó–≤—ë–∑–¥—ã –Ω–∞–¥ –ø–æ–ª—è–Ω–æ–π –ø—Ä–µ–¥–≤–µ—â–∞—é—Ç —Å—É–¥—å–±—É...",
      "–ü–µ—â–µ—Ä–∞": "–¢—å–º–∞ –ø–µ—â–µ—Ä—ã —Ö—Ä–∞–Ω–∏—Ç –∑–∞–±—ã—Ç—ã–µ —Ç–∞–π–Ω—ã...",
      "–†–∞–∑–≤–∞–ª–∏–Ω—ã": "–ö–∞–º–Ω–∏ –ø–æ–º–Ω—è—Ç —Å–ª–∞–≤—É —É—à–µ–¥—à–∏—Ö —ç–ø–æ—Ö...",
      "–ë–∞—à–Ω—è": "–≠—Ñ–∏—Ä –∫—Ä—É–∂–∏—Ç —É —Å—Ç–µ–Ω –æ–¥–∏–Ω–æ–∫–æ–π –±–∞—à–Ω–∏...",
      "–•—Ä–∞–º": "–°–≤–µ—Ç –≤–µ—á–Ω–æ–≥–æ –æ–≥–Ω—è –º–∞–Ω–∏—Ç –≤–ø–µ—Ä—ë–¥...",
      "–ü–æ—Ä—Ç–∞–ª": "–ò–Ω—ã–µ –º–∏—Ä—ã –∂–¥—É—Ç –∑–∞ –≥—Ä–∞–Ω—å—é —Å–≤–µ—Ç–∞...",
      "–û–∑–µ—Ä–æ": "–ì–ª–∞–¥—å –æ–∑–µ—Ä–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç –¥—Ä–µ–≤–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç—ã...",
      "–ë–æ–ª–æ—Ç–æ": "–¢—É–º–∞–Ω –±–æ–ª–æ—Ç —Ç–∞–∏—Ç —Å–º–µ—Ä—Ç–µ–ª—å–Ω—ã–µ –ª–æ–≤—É—à–∫–∏...",
      "–ö–∞–Ω—å–æ–Ω": "–ö—Ä–∞—Å–Ω—ã–µ —Å–∫–∞–ª—ã —Ö—Ä–∞–Ω—è—Ç –∑–Ω–∞–∫–∏ –ø—Ä–µ–¥–∫–æ–≤...",
      "–†–∞–≤–Ω–∏–Ω–∞": "–¢—Ä–∞–≤—ã —à–µ–ø—á—É—Ç –æ –≥–µ—Ä–æ—è—Ö –ø—Ä–æ—à–ª–æ–≥–æ...",
      "–ö—Ä–µ–ø–æ—Å—Ç—å": "–°—Ç–µ–Ω—ã –∫—Ä–µ–ø–æ—Å—Ç–∏ –ø–æ–º–Ω—è—Ç –∫–ª—è—Ç–≤—ã —Ä—ã—Ü–∞—Ä–µ–π..."
    };

    // –ò–∫–æ–Ω–∫–∏ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    const itemIcons = {
      "–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è": "healthpotion.png",
      "–ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏": "boots.png",
      "–õ—É–∫": "bow.png",
      "–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è": "leatherarmor.png",
      "–ö–æ–ª—å—á—É–∂–Ω—ã–π –∫–∞–ø—é—à–æ–Ω": "chainhood.png",
      "–ú–µ—á": "sword.png",
      "–©–∏—Ç": "shield.png",
      "–°—Ç–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è": "steelarmor.png",
      "–ö–∏–Ω–∂–∞–ª—ã": "daggers.png",
      "–ü–ª–∞—â —Ç–µ–Ω–µ–π": "shadowcloak.png",
      "–ú–∞—Å–∫–∞": "mask.png"
    };

    // –û–ø–∏—Å–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    const itemDescriptions = {
      "–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è": "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 50 –µ–¥–∏–Ω–∏—Ü –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.",
      "–ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏": "–£–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞ 10%.",
      "–õ—É–∫": "–û—Ä—É–∂–∏–µ –¥–∞–ª—å–Ω–µ–≥–æ –±–æ—è, –Ω–∞–Ω–æ—Å–∏—Ç 15 —É—Ä–æ–Ω–∞.",
      "–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è": "–õ—ë–≥–∫–∞—è –±—Ä–æ–Ω—è, –¥–æ–±–∞–≤–ª—è–µ—Ç 10 –∑–∞—â–∏—Ç—ã.",
      "–ö–æ–ª—å—á—É–∂–Ω—ã–π –∫–∞–ø—é—à–æ–Ω": "–ó–∞—â–∏—â–∞–µ—Ç –≥–æ–ª–æ–≤—É, –¥–æ–±–∞–≤–ª—è–µ—Ç 5 –∑–∞—â–∏—Ç—ã.",
      "–ú–µ—á": "–ú–æ—â–Ω–æ–µ –æ—Ä—É–∂–∏–µ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è, –Ω–∞–Ω–æ—Å–∏—Ç 20 —É—Ä–æ–Ω–∞.",
      "–©–∏—Ç": "–ë–ª–æ–∫–∏—Ä—É–µ—Ç 30% –≤—Ö–æ–¥—è—â–µ–≥–æ —É—Ä–æ–Ω–∞.",
      "–°—Ç–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è": "–¢—è–∂—ë–ª–∞—è –±—Ä–æ–Ω—è, –¥–æ–±–∞–≤–ª—è–µ—Ç 20 –∑–∞—â–∏—Ç—ã.",
      "–ö–∏–Ω–∂–∞–ª—ã": "–ë—ã—Å—Ç—Ä–æ–µ –æ—Ä—É–∂–∏–µ, –Ω–∞–Ω–æ—Å–∏—Ç 12 —É—Ä–æ–Ω–∞ —Å —à–∞–Ω—Å–æ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞.",
      "–ü–ª–∞—â —Ç–µ–Ω–µ–π": "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —É–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–∞ 15%.",
      "–ú–∞—Å–∫–∞": "–°–∫—Ä—ã–≤–∞–µ—Ç –ª–∏—á–Ω–æ—Å—Ç—å, –ø–æ–≤—ã—à–∞–µ—Ç —Å–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å."
    };

    // –î–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤
    const classData = {
      archer: {
        name: "–°–ª–µ–¥–æ–ø—ã—Ç",
        image: "archer.png",
        desc: "–ò—Å–∫—Ä—ã –≥–ª–∞–∑ —Å–ª–µ–¥—è—Ç –∑–∞ –∫–∞–∂–¥—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º –≤ —á–∞—â–µ, –∞ —Å—Ç—Ä–µ–ª—ã –±—å—é—Ç –±–µ–∑ –ø—Ä–æ–º–∞—Ö–∞.",
        feature: "–ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ 10% –±—ã—Å—Ç—Ä–µ–µ.",
        equipment: ["–õ—É–∫", "–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è", "–ö–æ–ª—å—á—É–∂–Ω—ã–π –∫–∞–ø—é—à–æ–Ω", "–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è", "–ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏"]
      },
      warrior: {
        name: "–í–æ–∏–Ω",
        image: "warrior.png",
        desc: "–°–∏–ª—å–Ω—ã–π –∏ –≤—ã–Ω–æ—Å–ª–∏–≤—ã–π –±–æ–µ—Ü, –≥–æ—Ç–æ–≤—ã–π —Å—Ç–æ—è—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.",
        feature: "–ü–æ–ª—É—á–∞–µ—Ç –Ω–∞ 15% –º–µ–Ω—å—à–µ —É—Ä–æ–Ω–∞.",
        equipment: ["–ú–µ—á", "–©–∏—Ç", "–°—Ç–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è", "–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è", "–ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏"]
      },
      rogue: {
        name: "–†–∞–∑–±–æ–π–Ω–∏–∫",
        image: "rogue.png",
        desc: "–¢–µ–Ω—å, —á—Ç–æ –∫—Ä–∞–¥—ë—Ç—Å—è –≤ –Ω–æ—á–∏, —Å –∫–ª–∏–Ω–∫–æ–º, –≥–æ—Ç–æ–≤—ã–º –∫ —É–¥–∞—Ä—É.",
        feature: "–ù–∞–Ω–æ—Å–∏—Ç –Ω–∞ 20% –±–æ–ª—å—à–µ —É—Ä–æ–Ω–∞ –ø—Ä–∏ —Å–∫—Ä—ã—Ç–Ω–æ–π –∞—Ç–∞–∫–µ.",
        equipment: ["–ö–∏–Ω–∂–∞–ª—ã", "–ü–ª–∞—â —Ç–µ–Ω–µ–π", "–ú–∞—Å–∫–∞", "–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è", "–ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏"]
      }
    };

    // –°–±—Ä–æ—Å –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤
    function resetScreens() {
      document.querySelectorAll("#splash-dev, #splash-title, #main-menu, #about-screen, #class-selection, #game-screen, #travel-screen, #npc-dialog, #quests-screen, #inventory-screen")
        .forEach(el => {
          el.classList.remove("visible");
          el.classList.add("hidden");
        });
      document.getElementById("sidebar-menu").classList.remove("open");
      document.getElementById("menu-button").classList.add("hidden");
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–∫–æ–≤—ã–º –º–µ–Ω—é
    function closeMenuOnOutsideClick(event) {
      const sidebar = document.getElementById("sidebar-menu");
      const menuButton = document.getElementById("menu-button");
      const sidebarClose = document.getElementById("sidebar-close");
      if (sidebar.classList.contains("open") &&
          !event.target.closest("#sidebar-menu") &&
          !event.target.closest("#menu-button") &&
          !event.target.closest("#sidebar-close")) {
        toggleMenu();
      }
    }

    function toggleMenu() {
      const sidebar = document.getElementById("sidebar-menu");
      sidebar.classList.toggle("open");
      if (sidebar.classList.contains("open")) {
        sidebar.classList.remove("hidden");
        sidebar.classList.add("visible");
        document.addEventListener("click", closeMenuOnOutsideClick);
      } else {
        sidebar.classList.remove("visible");
        document.removeEventListener("click", closeMenuOnOutsideClick);
        setTimeout(() => {
          if (!sidebar.classList.contains("open")) {
            sidebar.classList.add("hidden");
          }
        }, 300);
      }
    }

    // –≠–∫—Ä–∞–Ω —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ —Å NPC
    let currentNpc = null;

    function showNpcDialog(name) {
      resetScreens();
      const dialog = document.getElementById("npc-dialog");
      document.getElementById("npc-name").innerText = name;
      document.getElementById("npc-desc").innerText = npcData[name].desc;
      document.getElementById("npc-text").innerText = npcData[name].text;
      document.getElementById("npc-image").src = npcData[name].image;
      currentNpc = name;

      const questButton = document.getElementById("npc-quest");
      const questLimitMsg = document.getElementById("quest-limit-msg");

      if (name === "–ú—É–¥—Ä–∞—è –∂–∞–±–∞") {
        questButton.classList.add("hidden");
        questLimitMsg.classList.add("hidden");
      } else {
        const alreadyTaken = playerData.quests.find(q => q.npc === name);
        const tooManyQuests = playerData.quests.length >= 4;

        if (alreadyTaken) {
          questButton.classList.add("hidden");
          questLimitMsg.classList.add("hidden");
        } else if (tooManyQuests) {
          questButton.disabled = true;
          questButton.classList.remove("hidden");
          questLimitMsg.classList.remove("hidden");
        } else {
          questButton.disabled = false;
          questButton.classList.remove("hidden");
          questLimitMsg.classList.add("hidden");
        }
      }

      dialog.classList.remove("hidden");
      dialog.classList.add("visible");
    }

    function closeNpcDialog() {
      resetScreens();
      document.getElementById("game-screen").classList.remove("hidden");
      document.getElementById("game-screen").classList.add("visible");
      document.getElementById("menu-button").classList.remove("hidden");
      document.getElementById("menu-button").classList.add("visible");
      currentNpc = null;
      updateLocation();
    }

    function takeQuest() {
      if (currentNpc && questData[currentNpc]) {
        const quest = questData[currentNpc];
        if (!playerData.quests.find(q => q.npc === currentNpc) && playerData.quests.length < 4) {
          playerData.quests.push({
            npc: currentNpc,
            title: quest.title,
            desc: quest.desc,
            condition: quest.condition,
            reward: quest.reward
          });
          saveGame();
        }
        closeNpcDialog();
      }
    }

    // –≠–∫—Ä–∞–Ω –∫–≤–µ—Å—Ç–æ–≤
    function showQuests() {
      resetScreens();
      const questsScreen = document.getElementById("quests-screen");
      const questsList = document.getElementById("quests-list");
      questsList.innerHTML = "";

      if (playerData.quests.length === 0) {
        questsList.innerHTML = '<p>–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π. –ü–æ—Ö–æ–¥–∏—Ç–µ –ø–æ –æ–∫—Ä—É–≥ –∏ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç–µ —Å –ª—é–¥—å–º–∏ - –º–æ–∂–µ—Ç –∫–æ–º—É-—Ç–æ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å.</p>';
      } else {
        playerData.quests.forEach((quest, index) => {
          const questItem = document.createElement("div");
          questItem.className = "quest-item";
          questItem.innerHTML = `
            <strong>${quest.title}</strong>
            <div>${quest.desc}</div>
            <div class="quest-details hidden" id="quest-details-${index}">
              <p><strong>–£—Å–ª–æ–≤–∏–µ:</strong> ${quest.condition}</p>
              <p><strong>–ù–∞–≥—Ä–∞–¥–∞:</strong> ${quest.reward}</p>
            </div>
          `;
          questItem.addEventListener("click", (e) => {
            e.stopPropagation();
            const details = document.getElementById(`quest-details-${index}`);
            const isHidden = details.classList.contains("hidden");
            document.querySelectorAll(".quest-details").forEach(d => d.classList.add("hidden"));
            if (isHidden) {
              details.classList.remove("hidden");
            }
          });
          questsList.appendChild(questItem);
        });
      }

      questsScreen.classList.remove("hidden");
      questsScreen.classList.add("visible");
      document.getElementById("menu-button").classList.remove("hidden");
      document.getElementById("menu-button").classList.add("visible");

      document.addEventListener("click", closeQuestDetailsOnOutsideClick);
    }

    function closeQuestDetailsOnOutsideClick(event) {
      if (!event.target.closest(".quest-item")) {
        document.querySelectorAll(".quest-details").forEach(d => d.classList.add("hidden"));
      }
    }

    function backToGame() {
      resetScreens();
      document.getElementById("game-screen").classList.remove("hidden");
      document.getElementById("game-screen").classList.add("visible");
      document.getElementById("menu-button").classList.remove("hidden");
      document.getElementById("menu-button").classList.add("visible");
      document.removeEventListener("click", closeQuestDetailsOnOutsideClick);
      updateLocation();
    }

    // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
    function showAboutCharacter() {
      alert("–†–∞–∑–¥–µ–ª '–û–± –∏–≥—Ä–æ–∫–µ' –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!");
    }

    function showInventory() {
      resetScreens();
      const inventoryScreen = document.getElementById("inventory-screen");
      const inventoryList = document.getElementById("inventory-list");
      const inventoryEmpty = document.getElementById("inventory-empty");
      const tabs = document.querySelectorAll(".tab-button");

      // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–¥–µ–ª –æ—Ä—É–∂–∏—è
      let currentTab = "weapons";
      tabs.forEach(tab => {
        tab.classList.remove("active");
        if (tab.dataset.tab === currentTab) {
          tab.classList.add("active");
        }
      });

      function renderInventory(tab) {
        inventoryList.innerHTML = "";
        const items = playerData.inventory[tab] || [];
        inventoryEmpty.classList.add("hidden");

        if (items.length === 0) {
          inventoryEmpty.classList.remove("hidden");
        } else {
          for (let i = 0; i < 10; i++) {
            const item = items[i];
            const itemElement = document.createElement("div");
            itemElement.className = "inventory-item" + (item ? "" : " empty");
            if (item) {
              itemElement.innerHTML = `
                <img src="${itemIcons[item]}" alt="${item}">
                <div class="item-text">
                  <div class="item-name">${item}</div>
                  <div class="item-desc">${itemDescriptions[item]}</div>
                </div>
              `;
            }
            inventoryList.appendChild(itemElement);
          }
        }
      }

      // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
      renderInventory(currentTab);

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
      tabs.forEach(tab => {
        tab.addEventListener("click", () => {
          currentTab = tab.dataset.tab;
          tabs.forEach(t => t.classList.remove("active"));
          tab.classList.add("active");
          renderInventory(currentTab);
        });
      });

      inventoryScreen.classList.remove("hidden");
      inventoryScreen.classList.add("visible");
      document.getElementById("menu-button").classList.remove("hidden");
      document.getElementById("menu-button").classList.add("visible");
    }

    function showSkills() {
      alert("–†–∞–∑–¥–µ–ª '–£–º–µ–Ω–∏—è' –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!");
    }

    // Splash-—ç–∫—Ä–∞–Ω—ã
    resetScreens();
    document.getElementById("splash-dev").classList.remove("hidden");
    document.getElementById("splash-dev").classList.add("visible");

    setTimeout(() => {
      document.getElementById("splash-dev").classList.remove("visible");
      document.getElementById("splash-dev").classList.add("hidden");
      setTimeout(() => {
        resetScreens();
        document.getElementById("splash-title").classList.remove("hidden");
        document.getElementById("splash-title").classList.add("visible");
        setTimeout(() => {
          document.getElementById("splash-title").classList.remove("visible");
          document.getElementById("splash-title").classList.add("hidden");
          setTimeout(() => {
            resetScreens();
            document.getElementById("main-menu").classList.remove("hidden");
            document.getElementById("main-menu").classList.add("visible");
          }, 500);
        }, 3000);
      }, 500);
    }, 3000);

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    let playerData = {
      class: null,
      location: "–î–µ—Ä–µ–≤–Ω—è",
      quests: [],
      inventory: {
        weapons: [],
        armor: [],
        potions: [],
        keyItems: []
      }
    };

    // –†–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç –î–µ—Ä–µ–≤–Ω–∏
    const locationDistances = {
      "–î–µ—Ä–µ–≤–Ω—è": 0,
      "–õ–µ—Å": 1,
      "–†–µ–∫–∞": 1,
      "–ì–æ—Ä—ã": 2,
      "–ü–æ–ª—è–Ω–∞": 2,
      "–ü–µ—â–µ—Ä–∞": 2,
      "–†–∞–∑–≤–∞–ª–∏–Ω—ã": 3,
      "–ë–∞—à–Ω—è": 3,
      "–•—Ä–∞–º": 4,
      "–ü–æ—Ä—Ç–∞–ª": 5,
      "–û–∑–µ—Ä–æ": 2,
      "–ë–æ–ª–æ—Ç–æ": 3,
      "–ö–∞–Ω—å–æ–Ω": 3,
      "–†–∞–≤–Ω–∏–Ω–∞": 4,
      "–ö—Ä–µ–ø–æ—Å—Ç—å": 5
    };

    // –ù–∞–∑–≤–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–π –≤ –≤–∏–Ω–∏—Ç–µ–ª—å–Ω–æ–º –ø–∞–¥–µ–∂–µ
    const locationAccusative = {
      "–î–µ—Ä–µ–≤–Ω—è": "–î–µ—Ä–µ–≤–Ω—é",
      "–õ–µ—Å": "–õ–µ—Å",
      "–†–µ–∫–∞": "–†–µ–∫—É",
      "–ì–æ—Ä—ã": "–ì–æ—Ä—ã",
      "–ü–æ–ª—è–Ω–∞": "–ü–æ–ª—è–Ω—É",
      "–ü–µ—â–µ—Ä–∞": "–ü–µ—â–µ—Ä—É",
      "–†–∞–∑–≤–∞–ª–∏–Ω—ã": "–†–∞–∑–≤–∞–ª–∏–Ω—ã",
      "–ë–∞—à–Ω—è": "–ë–∞—à–Ω—é",
      "–•—Ä–∞–º": "–•—Ä–∞–º",
      "–ü–æ—Ä—Ç–∞–ª": "–ü–æ—Ä—Ç–∞–ª",
      "–û–∑–µ—Ä–æ": "–û–∑–µ—Ä–æ",
      "–ë–æ–ª–æ—Ç–æ": "–ë–æ–ª–æ—Ç–æ",
      "–ö–∞–Ω—å–æ–Ω": "–ö–∞–Ω—å–æ–Ω",
      "–†–∞–≤–Ω–∏–Ω–∞": "–†–∞–≤–Ω–∏–Ω—É",
      "–ö—Ä–µ–ø–æ—Å—Ç—å": "–ö—Ä–µ–ø–æ—Å—Ç—å"
    };

    // –ö–ª–∞—Å—Å—ã
    function toggleClassInfo(element) {
      const options = document.querySelectorAll(".class-option");
      options.forEach(opt => {
        const details = opt.querySelector(".class-details");
        opt.classList.remove("selected");
        details.classList.add("hidden");
      });
      const details = element.querySelector(".class-details");
      details.classList.toggle("hidden");
      if (!details.classList.contains("hidden")) {
        element.classList.add("selected");
      }
    }

    function newGame() {
      playerData = {
        class: null,
        location: "–î–µ—Ä–µ–≤–Ω—è",
        quests: [],
        inventory: {
          weapons: [],
          armor: [],
          potions: [],
          keyItems: []
        }
      };
      resetScreens();
      document.getElementById("class-selection").classList.remove("hidden");
      document.getElementById("class-selection").classList.add("visible");
      document.querySelectorAll(".class-option").forEach(opt => {
        opt.classList.remove("selected");
        opt.querySelector(".class-details").classList.add("hidden");
      });
    }

    function continueGame() {
      const data = localStorage.getItem("mygame-save");
      if (data) {
        playerData = JSON.parse(data);
        startGame();
      } else {
        alert("–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∏–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—É—é –∏–≥—Ä—É.");
      }
    }

    function showAbout() {
      resetScreens();
      document.getElementById("about-screen").classList.remove("hidden");
      document.getElementById("about-screen").classList.add("visible");
    }

    function backToMenu() {
      resetScreens();
      document.getElementById("main-menu").classList.remove("hidden");
      document.getElementById("main-menu").classList.add("visible");
    }

    function selectClass() {
      if (!playerData.class) {
        const selectedOption = document.querySelector(".class-option .class-details:not(.hidden)");
        const selectedClass = selectedOption
          ? selectedOption.closest(".class-option").dataset.class
          : "warrior";
        playerData.class = selectedClass;
      }

      // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
      const classInfo = classData[playerData.class];
      playerData.inventory.potions.push("–ó–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è");
      playerData.inventory.keyItems.push("–ü–æ—Ö–æ–¥–Ω—ã–µ —Å–∞–ø–æ–≥–∏");

      if (playerData.class === "archer") {
        playerData.inventory.weapons.push("–õ—É–∫");
        playerData.inventory.armor.push("–ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è", "–ö–æ–ª—å—á—É–∂–Ω—ã–π –∫–∞–ø—é—à–æ–Ω");
      } else if (playerData.class === "warrior") {
        playerData.inventory.weapons.push("–ú–µ—á");
        playerData.inventory.armor.push("–©–∏—Ç", "–°—Ç–∞–ª—å–Ω–∞—è –±—Ä–æ–Ω—è");
      } else if (playerData.class === "rogue") {
        playerData.inventory.weapons.push("–ö–∏–Ω–∂–∞–ª—ã");
        playerData.inventory.armor.push("–ü–ª–∞—â —Ç–µ–Ω–µ–π");
        playerData.inventory.keyItems.push("–ú–∞—Å–∫–∞");
      }

      saveGame();
      resetScreens();
      startGame();
    }

    function startGame() {
      resetScreens();
      document.getElementById("game-screen").classList.remove("hidden");
      document.getElementById("game-screen").classList.add("visible");
      document.getElementById("menu-button").classList.remove("hidden");
      document.getElementById("menu-button").classList.add("visible");
      updateLocation();
    }

    function saveGame() {
      localStorage.setItem("mygame-save", JSON.stringify(playerData));
    }

    function showTravelScreen(targetLocation, duration) {
      resetScreens();
      const travelScreen = document.getElementById("travel-screen");
      const travelTimer = document.getElementById("travel-timer");
      const travelText = document.getElementById("travel-text");
      travelScreen.classList.remove("hidden");
      travelScreen.classList.add("visible");
      let timeLeft = Math.ceil(duration / 1000);
      travelTimer.innerText = `–í—ã –∏–¥—ë—Ç–µ –≤ ${locationAccusative[targetLocation]}... ${timeLeft} —Å–µ–∫`;
      travelText.innerText = travelTexts[targetLocation] || "–ü—É—Ç—å –º–∞–Ω–∏—Ç –≤–ø–µ—Ä—ë–¥...";

      const interval = setInterval(() => {
        timeLeft--;
        if (timeLeft > 0) {
          travelTimer.innerText = `–í—ã –∏–¥—ë—Ç–µ –≤ ${locationAccusative[targetLocation]}... ${timeLeft} —Å–µ–∫`;
        } else {
          clearInterval(interval);
          playerData.location = targetLocation;
          saveGame();
          resetScreens();
          document.getElementById("game-screen").classList.remove("hidden");
          document.getElementById("game-screen").classList.add("visible");
          document.getElementById("menu-button").classList.remove("hidden");
          document.getElementById("menu-button").classList.add("visible");
          updateLocation();
        }
      }, 1000);
    }

    // –õ–æ–∫–∞—Ü–∏–∏
    const locations = {
      "–î–µ—Ä–µ–≤–Ω—è": {
        desc: "–¢–∏—Ö–∞—è –¥–µ—Ä–µ–≤–Ω—è, –æ–∫—Ä—É–∂—ë–Ω–Ω–∞—è —Å—Ç–∞—Ä—ã–º–∏ –¥—É–±–∞–º–∏. –ö–∞–º–µ–Ω–Ω—ã–µ –¥–æ–º–∞ —Ö—Ä–∞–Ω—è—Ç –∏—Å—Ç–æ—Ä–∏–∏ –æ –¥—Ä–µ–≤–Ω–∏—Ö –≥–µ—Ä–æ—è—Ö, –∞ –≤ —Ç–∞–≤–µ—Ä–Ω–µ —à–µ–ø—á—É—Ç—Å—è –æ –ø—Ä–æ–∫–ª—è—Ç—ã—Ö –∑–µ–º–ª—è—Ö.",
        paths: ["–õ–µ—Å", "–†–µ–∫–∞"],
        characters: ["–°—Ç–∞—Ä–æ—Å—Ç–∞ –õ–µ–º", "–ö—É–∑–Ω–µ—Ü –ë—Ä–∞–Ω"],
        monsters: []
      },
      "–õ–µ—Å": {
        desc: "–¢—ë–º–Ω—ã–π –ª–µ—Å, –≥–¥–µ –≤–µ—Ç–≤–∏ —Å–ø–ª–µ—Ç–∞—é—Ç—Å—è –≤ —É–∑–æ—Ä—ã. –¢—É–º–∞–Ω —Å–∫—Ä—ã–≤–∞–µ—Ç —Ç—Ä–æ–ø—ã, –∞ —à–æ—Ä–æ—Ö–∏ –Ω–∞–º–µ–∫–∞—é—Ç –Ω–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É—Ö–æ–≤.",
        paths: ["–î–µ—Ä–µ–≤–Ω—è", "–ì–æ—Ä—ã", "–ü–æ–ª—è–Ω–∞"],
        characters: ["–û—Ö–æ—Ç–Ω–∏—Ü–∞ –≠–ª–∏—Ä–∞"],
        monsters: ["–î—Ä–µ–≤–µ—Å–Ω—ã–π —É–∂–∞—Å", "–¢–µ–Ω–µ–ª–∏—Å"]
      },
      "–†–µ–∫–∞": {
        desc: "–†–µ–∫–∞ —Å –ª–µ–¥—è–Ω–æ–π –≤–æ–¥–æ–π, —á—å–∏ –≤–æ–ª–Ω—ã –ø–æ—é—Ç –æ –∑–∞–±—ã—Ç—ã—Ö –±–æ–≥–∞—Ö. –ù–∞ –±–µ—Ä–µ–≥—É –≤–∏–¥–Ω—ã —Å–ª–µ–¥—ã –¥—Ä–µ–≤–Ω–∏—Ö –∞–ª—Ç–∞—Ä–µ–π.",
        paths: ["–î–µ—Ä–µ–≤–Ω—è", "–ü–µ—â–µ—Ä–∞", "–û–∑–µ—Ä–æ"],
        characters: ["–†—ã–±–∞–∫ –ù–æ—Ä"],
        monsters: ["–í–æ–¥—è–Ω–∞—è —Ç–≤–∞—Ä—å"]
      },
      "–ì–æ—Ä—ã": {
        desc: "–°—É—Ä–æ–≤—ã–µ –≥–æ—Ä—ã, —á—å–∏ –≤–µ—Ä—à–∏–Ω—ã –∫–∞—Å–∞—é—Ç—Å—è –∑–≤—ë–∑–¥. –°–∫–∞–ª—ã —Ö—Ä–∞–Ω—è—Ç —ç—Ö–æ –±–∏—Ç–≤ –¥–∞–≤–Ω–æ —É—à–µ–¥—à–∏—Ö –≤—Ä–µ–º—ë–Ω.",
        paths: ["–õ–µ—Å", "–†–∞–∑–≤–∞–ª–∏–Ω—ã", "–ö–∞–Ω—å–æ–Ω"],
        characters: [],
        monsters: ["–ì–æ—Ä–Ω—ã–π –≥–æ–ª–µ–º"]
      },
      "–ü–æ–ª—è–Ω–∞": {
        desc: "–õ—É–Ω–Ω–∞—è –ø–æ–ª—è–Ω–∞, –≥–¥–µ —Å–≤–µ—Ç –∑–≤—ë–∑–¥ —Å–æ–∑–¥–∞—ë—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–µ —É–∑–æ—Ä—ã. –ó–¥–µ—Å—å –≤—Ä–µ–º—è –∑–∞–º–∏—Ä–∞–µ—Ç, –∞ –¥—É—Ö–∏ —à–µ–ø—á—É—Ç –ø—Ä–æ—Ä–æ—á–µ—Å—Ç–≤–∞.",
        paths: ["–õ–µ—Å", "–ë–∞—à–Ω—è"],
        characters: [],
        monsters: []
      },
      "–ü–µ—â–µ—Ä–∞": {
        desc: "–ú—Ä–∞—á–Ω–∞—è –ø–µ—â–µ—Ä–∞, –≥–¥–µ —Å—Ç–∞–ª–∞–∫—Ç–∏—Ç—ã –±–ª–µ—Å—Ç—è—Ç, –∫–∞–∫ –∫–ª—ã–∫–∏. –í –≥–ª—É–±–∏–Ω–µ —Å–ª—ã—à–Ω—ã —Å—Ç–æ–Ω—ã –∑–∞—Ç–æ—á—ë–Ω–Ω—ã—Ö —Ç–µ–Ω–µ–π.",
        paths: ["–†–µ–∫–∞", "–†–∞–∑–≤–∞–ª–∏–Ω—ã", "–ë–æ–ª–æ—Ç–æ"],
        characters: [],
        monsters: ["–°–ª–∏–∑–µ–Ω—å", "–ü–µ—â–µ—Ä–Ω—ã–π –ø–∞—É–∫"]
      },
      "–†–∞–∑–≤–∞–ª–∏–Ω—ã": {
        desc: "–û—Å—Ç–∞–Ω–∫–∏ –¥—Ä–µ–≤–Ω–µ–≥–æ –≥–æ—Ä–æ–¥–∞, –≥–¥–µ –≤–µ—Ç–µ—Ä –Ω–µ—Å—ë—Ç –æ—Ç–≥–æ–ª–æ—Å–∫–∏ –±—ã–ª–æ–π —Å–ª–∞–≤—ã. –ö–∞–º–Ω–∏ —Ö—Ä–∞–Ω—è—Ç —Å–ª–µ–¥—ã –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Ä—É–Ω.",
        paths: ["–ì–æ—Ä—ã", "–ü–µ—â–µ—Ä–∞", "–•—Ä–∞–º"],
        characters: [],
        monsters: ["–ü—Ä–∏–∑—Ä–∞–∫ –ª–µ–≥–∏–æ–Ω–∞"]
      },
      "–ë–∞—à–Ω—è": {
        desc: "–û–¥–∏–Ω–æ–∫–∞—è –±–∞—à–Ω—è, –æ–∫—Ä—É–∂—ë–Ω–Ω–∞—è –≤–∏—Ö—Ä—è–º–∏ —ç—Ñ–∏—Ä–∞. –ï—ë —Å—Ç–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç —Ç–∞–π–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–∞–≥–∞.",
        paths: ["–ü–æ–ª—è–Ω–∞", "–•—Ä–∞–º"],
        characters: ["–°—Ç—Ä–∞–∂ –†–æ–ª–∞–Ω"],
        monsters: []
      },
      "–•—Ä–∞–º": {
        desc: "–•—Ä–∞–º, —á—å–∏ –∫–æ–ª–æ–Ω–Ω—ã –ø–æ–∫—Ä—ã—Ç—ã –º—Ö–æ–º. –í–Ω—É—Ç—Ä–∏ –≥–æ—Ä–∏—Ç –≤–µ—á–Ω—ã–π –æ–≥–æ–Ω—å, –æ—Ö—Ä–∞–Ω—è–µ–º—ã–π –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ —Å—Ç—Ä–∞–∂–∞–º–∏.",
        paths: ["–ë–∞—à–Ω—è", "–†–∞–∑–≤–∞–ª–∏–Ω—ã", "–ü–æ—Ä—Ç–∞–ª", "–ö—Ä–µ–ø–æ—Å—Ç—å"],
        characters: [],
        monsters: ["–°–ª—É–∂–∏—Ç–µ–ª—å –¢–µ–Ω–∏"]
      },
      "–ü–æ—Ä—Ç–∞–ª": {
        desc: "–ö—Ä—É–≥ –∫–∞–º–Ω–µ–π, –∏–∑–ª—É—á–∞—é—â–∏–π –Ω–µ–∑–µ–º–Ω–æ–π —Å–≤–µ—Ç. –ü–æ—Ä—Ç–∞–ª –º–∞–Ω–∏—Ç –≤ –∏–Ω—ã–µ –º–∏—Ä—ã, –Ω–æ –µ–≥–æ —Å—Ç—Ä–∞–∂–∏ –Ω–µ —Ç–µ—Ä–ø—è—Ç —Å–ª–∞–±—ã—Ö.",
        paths: ["–•—Ä–∞–º"],
        characters: [],
        monsters: ["–°—Ç—Ä–∞–∂ –ë–µ–∑–¥–Ω—ã"]
      },
      "–û–∑–µ—Ä–æ": {
        desc: "–°–ø–æ–∫–æ–π–Ω–æ–µ –æ–∑–µ—Ä–æ, —á—å—è –≥–ª–∞–¥—å –æ—Ç—Ä–∞–∂–∞–µ—Ç –∑–≤—ë–∑–¥—ã. –í –≥–ª—É–±–∏–Ω–∞—Ö —Ç–∞—è—Ç—Å—è –¥—Ä–µ–≤–Ω–∏–µ —Ä–µ–ª–∏–∫–≤–∏–∏ –∏ –∏—Ö —Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏.",
        paths: ["–†–µ–∫–∞", "–ë–æ–ª–æ—Ç–æ"],
        characters: ["–°—Ç–∞—Ä–µ—Ü –í–µ–π–Ω"],
        monsters: ["–û–∑—ë—Ä–Ω—ã–π –¥—É—Ö"]
      },
      "–ë–æ–ª–æ—Ç–æ": {
        desc: "–ì–Ω–∏–ª–æ–µ –±–æ–ª–æ—Ç–æ, –≥–¥–µ —Ç–µ–Ω–∏ —Ç–∞–Ω—Ü—É—é—Ç –≤ —Ç—É–º–∞–Ω–µ. –¢—Ä—è—Å–∏–Ω–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–æ—Å—Ç–∏ —Ç–µ—Ö, –∫—Ç–æ –∏—Å–∫–∞–ª –∑–∞–ø—Ä–µ—Ç–Ω—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞.",
        paths: ["–û–∑–µ—Ä–æ", "–ü–µ—â–µ—Ä–∞"],
        characters: ["–ú—É–¥—Ä–∞—è –∂–∞–±–∞"],
        monsters: ["–ë–æ–ª–æ—Ç–Ω—ã–π –ø—Ä–∏–∑—Ä–∞–∫", "–ì–Ω–∏–ª–µ—Ü"]
      },
      "–ö–∞–Ω—å–æ–Ω": {
        desc: "–ö—Ä–∞—Å–Ω—ã–π –∫–∞–Ω—å–æ–Ω, –≤—ã—Å–µ—á–µ–Ω–Ω—ã–π –≤–µ—Ç—Ä–∞–º–∏ –≤–µ–∫–æ–≤. –ï–≥–æ —Å—Ç–µ–Ω—ã –ø–æ–∫—Ä—ã—Ç—ã –∑–Ω–∞–∫–∞–º–∏ –¥—Ä–µ–≤–Ω–∏—Ö –ø–ª–µ–º—ë–Ω.",
        paths: ["–ì–æ—Ä—ã", "–†–∞–≤–Ω–∏–Ω–∞"],
        characters: ["–°–∫–∏—Ç–∞–ª–µ—Ü –ö–∞–π—Ä"],
        monsters: ["–ü–µ—Å—á–∞–Ω—ã–π —è—â–µ—Ä"]
      },
      "–†–∞–≤–Ω–∏–Ω–∞": {
        desc: "–ë–µ—Å–∫—Ä–∞–π–Ω—è—è —Ä–∞–≤–Ω–∏–Ω–∞, –≥–¥–µ —Ç—Ä–∞–≤—ã —à–µ–ø—á—É—Ç –æ –∑–∞–±—ã—Ç—ã—Ö –±–∏—Ç–≤–∞—Ö. –í–¥–∞–ª–µ–∫–µ –≤–∏–¥–Ω–µ—é—Ç—Å—è —Å–∏–ª—É—ç—Ç—ã –¥—Ä–µ–≤–Ω–∏—Ö –∫—É—Ä–≥–∞–Ω–æ–≤.",
        paths: ["–ö–∞–Ω—å–æ–Ω", "–ö—Ä–µ–ø–æ—Å—Ç—å"],
        characters: [],
        monsters: ["–°—Ç–µ–ø–Ω–æ–π –≤–æ–ª–∫"]
      },
      "–ö—Ä–µ–ø–æ—Å—Ç—å": {
        desc: "–ü–æ–ª—É—Ä–∞–∑—Ä—É—à–µ–Ω–Ω–∞—è –∫—Ä–µ–ø–æ—Å—Ç—å, —á—å–∏ –±–∞—à–Ω–∏ –≤—Å—ë –µ—â—ë —Å—Ç–æ—è—Ç. –í –µ—ë –∑–∞–ª–∞—Ö –∑–≤—É—á–∞—Ç –æ—Ç–≥–æ–ª–æ—Å–∫–∏ —Ä—ã—Ü–∞—Ä—Å–∫–∏—Ö –∫–ª—è—Ç–≤.",
        paths: ["–†–∞–≤–Ω–∏–Ω–∞", "–•—Ä–∞–º"],
        characters: ["–ö–æ–º–µ–Ω–¥–∞–Ω—Ç –†–µ–π–Ω"],
        monsters: ["–û–∂–∏–≤—à–∏–π –¥–æ—Å–ø–µ—Ö"]
      }
    };

    function updateLocation() {
      const loc = playerData.location;
      const data = locations[loc];
      document.getElementById("location-name").innerText = loc;
      document.getElementById("location-desc").innerText = data.desc;

      const buttons = document.getElementById("location-buttons");
      buttons.innerHTML = "";

      data.paths.forEach(path => {
        const btn = document.createElement("button");
        btn.innerText = path;
        btn.onclick = () => {
          const distance = locationDistances[path];
          const travelTime = Math.min(distance * 5000, 15000);
          showTravelScreen(path, travelTime);
        };
        buttons.appendChild(btn);
      });

      const extraContent = document.getElementById("extra-content");
      extraContent.innerHTML = "";

      if (data.characters.length > 0) {
        const charTitle = document.createElement("div");
        charTitle.className = "section-title";
        charTitle.innerText = "–ü–µ—Ä—Å–æ–Ω–∞–∂–∏";
        const content = document.createElement("div");
        content.className = "section-content hidden";

        data.characters.forEach(name => {
          const btn = document.createElement("button");
          btn.innerText = name;
          btn.style.width = "100%";
          btn.style.margin = "5px 0";
          btn.onclick = () => showNpcDialog(name);
          content.appendChild(btn);
        });

        charTitle.onclick = () => {
          content.classList.toggle("hidden");
          charTitle.classList.toggle("open");
        };

        extraContent.appendChild(charTitle);
        extraContent.appendChild(content);
      }

      if (data.monsters.length > 0) {
        const monTitle = document.createElement("div");
        monTitle.className = "section-title";
        monTitle.innerText = "–ú–æ–Ω—Å—Ç—Ä—ã";
        const content = document.createElement("div");
        content.className = "section-content hidden";

        data.monsters.forEach(name => {
          const m = document.createElement("div");
          m.innerText = name;
          content.appendChild(m);
        });

        monTitle.onclick = () => {
          content.classList.toggle("hidden");
          monTitle.classList.toggle("open");
        };

        extraContent.appendChild(monTitle);
        extraContent.appendChild(content);
      }
    }
  </script>
</body>
</html>